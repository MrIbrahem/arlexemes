<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تحليل</title>
    <!-- jQuery -->
    <script src="https://tools-static.wmflabs.org/cdnjs/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <script src="https://tools-static.wmflabs.org/cdnjs/ajax/libs/popper.js/2.11.8/umd/popper.min.js"></script>

    <!-- Bootstrap 5 -->
    <link href="https://tools-static.wmflabs.org/cdnjs/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css"
        rel="stylesheet">
    <link href="https://tools-static.wmflabs.org/cdnjs/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css"
        rel='stylesheet' type='text/css'>
    <link href='https://tools-static.wmflabs.org/cdnjs/ajax/libs/datatables.net-bs5/2.2.2/dataTables.bootstrap5.css'
        rel='stylesheet'>

    <!-- DataTables Bootstrap 5 -->
    <script src="https://tools-static.wmflabs.org/cdnjs/ajax/libs/bootstrap/5.3.0/js/bootstrap.min.js"></script>
    <script src="https://tools-static.wmflabs.org/cdnjs/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src='https://tools-static.wmflabs.org/cdnjs/ajax/libs/datatables.net/2.2.2/dataTables.js'></script>
    <script
        src='https://tools-static.wmflabs.org/cdnjs/ajax/libs/datatables.net-bs5/2.2.2/dataTables.bootstrap5.min.js'></script>
    <style>
        .table_text_right,
        .table_text_right>thead>tr>th {
            text-align: right
        }

        a {
            text-decoration: none;
        }

        .autocomplete-container {
            position: relative;
            /* مهم لتموضع النتائج بشكل صحيح */
            width: 50%;
            /* أو أي عرض تريده */
            /* margin-top: 20px; */
        }

        .autocomplete-results {
            position: absolute;
            z-index: 1000;
            width: 100%;
            border: 1px solid #ced4da;
            border-top: none;
            background-color: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            max-height: 300px;
            overflow-y: auto;
            border-radius: 0 0 .25rem .25rem;
        }

        .autocomplete-item {
            padding: 8px 12px;
            cursor: pointer;
            text-align: right;
            /* للمحتوى العربي */
        }

        .autocomplete-item:hover,
        .autocomplete-item.selected {
            /* لإضافة تأثير عند التحديد بالكيبورد لاحقًا إذا أردت */
            background-color: #f0f0f0;
        }

        .autocomplete-item .description {
            font-size: 0.85em;
            color: #666;
        }
    </style>
</head>

<body class="p-4 bg-light text-end" dir="rtl">
    <div class="container-fluid">

        <div class="row">
            <div class="col-md-4">
                <h1 class="mb-4" id="header_main">
                    تحليل:
                    <a href="#" target="_blank" class="text-primary font-weight-bold" id="lemma_link"></a>
                    <span id="lemma_link_en"></span>
                </h1>
            </div>
            <div class="col-md-8">
                <div class="row">
                    <div class="col-md-5">
                        <span class="me-2">اسم:</span><br>
                        <button class="btn btn-outline-secondary btn-sm me-1"
                            onclick="setExample('L1244618')">L1244618</button>
                        <button class="btn btn-outline-secondary btn-sm me-1" onclick="setExample('L2465')">L2465 -
                            معدود</button>
                        <button class="btn btn-outline-secondary btn-sm me-1" onclick="setExample('L2355')">L2355 - غير
                            معدود</button>
                    </div>
                    <div class="col-md-4">
                        <span class="me-2">صفة:</span><br>
                        <button class="btn btn-outline-secondary btn-sm me-1"
                            onclick="setExample('L1131459')">L1131459</button>
                        <button class="btn btn-outline-secondary btn-sm me-1"
                            onclick="setExample('L1153733')">L1153733</button>
                        <button class="btn btn-outline-secondary btn-sm me-1"
                            onclick="setExample('L1153733')">L1153733</button>
                    </div>
                    <div class="col-md-3">
                        <span class="me-2">فعل:</span><br>
                        <button class="btn btn-outline-secondary btn-sm me-1"
                            onclick="setExample('L1460479')">L1460479</button>
                        <button class="btn btn-outline-secondary btn-sm me-1"
                            onclick="setExample('L12100')">L12100</button>
                        <button class="btn btn-outline-secondary btn-sm me-1"
                            onclick="setExample('L1235177')">L1235177</button>
                        <button class="btn btn-outline-secondary btn-sm me-1"
                            onclick="setExample('L1464180')">L1464180</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-4">
                <div class="input-group mb-3">
                    <input type="text" id="lexemeId" class="form-control" placeholder="أدخل معرف مثل L1467242"
                        value="L1467242">
                    <button class="btn btn-primary" onclick="start_lexeme_wrap()">تحميل</button>
                </div>
            </div>
            <div class="col-md-2">
                <select name="data_source" id="data_source" class="form-select d-inline-block">
                    <option value="Q34698">صفة</option>
                    <option value="Q24905">فعل</option>
                    <option value="Q1084">اسم</option>
                    <option value="Q111029">جذر</option>
                </select>
            </div>
            <div class="col-md-5">
                <div class="input-group mb-3">
                    <div class="autocomplete-container">
                        <input type="text" id="wikidatasearch" class="form-control" placeholder="اكتب للبحث..."
                            value=""> <span id="autocomplete-loader"
                            class="spinner-border spinner-border-sm inline-flex" role="status" style="display:none;">
                            <span class="visually-hidden">Loading...</span>
                        </span>
                        <div id="autocomplete-results" class="autocomplete-results"></div>
                    </div>
                </div>
            </div>
        </div>
        <div id="errors"></div>
        <div id="output"></div>

    </div>
    <script src="js/autocomplete.js"></script>
    <script src="js/lex/fetch.js"></script>
    <script src="js/lex/lex.js"></script>
    <script src="js/lex/lex_page.js"></script>
    <script>

        async function start_lexeme_wrap() {
            const id = document.getElementById("lexemeId").value.trim();
            if (!id) return;
            await start_lexeme(id);
        }
        function setExample(lexeme) {
            document.getElementById('lexemeId').value = lexeme;
            start_lexeme(lexeme);
        }

        $(document).ready(function () {
            // if ?lex=324 in url then load it setExample
            const urlParams = new URLSearchParams(window.location.search);
            const lex = urlParams.get('lex');
            if (lex) {
                setExample(lex);
            }
            load_search(setExample);

        });
    </script>

</body>

</html>
